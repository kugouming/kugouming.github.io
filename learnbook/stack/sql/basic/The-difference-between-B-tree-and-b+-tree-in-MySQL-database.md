# MySQL 数据库中B树和B+树的区别

![](_assets/d8cf79b5d9d790ff147dc69307cfe175_MD5.png)

​

MySQL数据库中，B树和B+树是常用的索引结构，用于提高数据检索的效率。它们在实现原理和适用场景上有一些区别。下面是B树和B+树的区别以及示例代码：

## 结构差异

- B树：B树是一种多路搜索树，每个节点可以拥有多个子节点。B树的每个节点都存储数据，并且节点的大小与磁盘页的大小相同。B树的叶子节点包含了所有的数据，而非叶子节点则包含了指向其他节点的指针。
- B+树：B+树也是一种多路搜索树，和B树一样，每个节点可以拥有多个子节点。B+树的非叶子节点只存储指向其他节点的指针，而数据只存储在叶子节点中。叶子节点之间通过指针连接形成一个有序链表。

## 数据存储

- B树：B树的每个节点都存储数据，包括叶子节点和非叶子节点。这意味着在B树中可以直接从非叶子节点找到需要的数据。
- B+树：B+树的数据只存储在叶子节点中，非叶子节点只存储指向其他节点的指针。这意味着在B+树中必须通过叶子节点才能找到需要的数据。

## 搜索性能

- B树：由于B树的每个节点都存储数据，所以在进行搜索时可以减少磁盘I/O次数。但是，由于B树的节点大小与磁盘页大小相同，每次读取磁盘页时可能会读取一些不需要的数据。
- B+树：由于B+树的数据只存储在叶子节点中，所以在进行搜索时需要更多的磁盘I/O次数。但是，由于叶子节点之间通过指针连接形成有序链表，可以进行范围查询，提高范围查询的性能。 示例代码如下所示： 

**创建B树索引
```sql
sqlCopy codeCREATE INDEX idx_name ON my_table (name);
```
	
**创建B+树索引：**
```sql
sqlCopy codeCREATE INDEX idx_name ON my_table (name) USING BTREE;
```

在实际应用中，需要根据数据的特点和查询需求选择合适的索引结构。B树适用于随机读取和范围查询较多的场景，而B+树适用于范围查询较多的场景。需要注意的是，索引的创建和维护可能会增加写操作的开销，因此需要权衡索引的使用。同时，索引的选择也需要考虑到数据库的大小、查询频率等因素。